<template>
  <require from='templates/posts/post-list'></require>
  <require from='templates/profile/bio'></require>
  <require from='templates/profile/menu-link'></require>
  <require from='templates/profile/profile-navigation'></require>
  <require from='templates/stats/profile-stats'></require>
  <require from='templates/modal-image'></require>
  <modal-image></modal-image>
  <section class="main-content-wrapper">
    <div class="pure-g">
      <div class="pure-u-1-4 pure-u-sm-1-6">
        <img id="profilePicture" src.bind="data[0].user.avatar_image.url" class="floatme pure-img ${showBanner? 'clean' : ''}" click.trigger="toggleVisible()"
        />
      </div>
      <div id="banner" class="pure-u-1 pure-u-sm-5-6 ${showBanner? 'clean' : ''}" css="background-image: url(${data[0].user.cover_image.url});">
        <div class="pure-g">
          <div id="profileDetails" class="pure-u-1 pure-u-md-4-5  pure-u-lg-2-3 ${showBanner? 'clean' : ''}">
            <h2>
              <profile-navigation user.bind="data[0].user"></profile-navigation>
            </h2>
            <bio user.bind="data[0].user"></bio>
            <nav class="pure-menu pure-menu-horizontal">
              <ul class="pure-menu-list">
                <menu-link menu.bind="{ count: data[0].user.counts.following, icon:'arrow-circle-left' }"></menu-link>
                <menu-link menu.bind="{ count: data[0].user.counts.followers, icon:'arrow-circle-right' }"></menu-link>
                <menu-link menu.bind="{ count: data[0].user.counts.posts, icon:'pencil-square-o' }"></menu-link>
                <menu-link menu.bind="{ count: data[0].user.counts.stars, icon:'star' }"></menu-link>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
    <div class="pure-g posts" if.bind="data[0].user.counts.posts>0">
      <div class="pure-u-1 stats-header">
        <h2>Last ${data.length} Posts
          <a href="#" click.delegate="loadMorePosts()">more...</a> <i class="clickable fa fa-refresh" click.delegate="refresh()"></i>
        </h2>
      </div>
      <div class="pure-u-1 stats">
        <profile-stats posts.bind="data"></profile-stats>
      </div>
    </div>
    <post-list posts.bind="{ data: data, avatar: false}"></post-list>
  </section>
</template>